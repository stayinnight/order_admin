webpackJsonp([1],{"0jVI":function(t,e){},"4WTo":function(t,e,i){var a=i("NWt+");t.exports=function(t,e){var i=[];return a(t,!1,i.push,i,e),i}},"7Doy":function(t,e,i){var a=i("EqjI"),r=i("7UMu"),l=i("dSzd")("species");t.exports=function(t){var e;return r(t)&&("function"!=typeof(e=t.constructor)||e!==Array&&!r(e.prototype)||(e=void 0),a(e)&&null===(e=e[l])&&(e=void 0)),void 0===e?Array:e}},"9Bbf":function(t,e,i){"use strict";var a=i("kM2E");t.exports=function(t){a(a.S,t,{of:function(){for(var t=arguments.length,e=new Array(t);t--;)e[t]=arguments[t];return new this(e)}})}},"9C8M":function(t,e,i){"use strict";var a=i("evD5").f,r=i("Yobk"),l=i("xH/j"),n=i("+ZMJ"),s=i("2KxR"),o=i("NWt+"),u=i("vIB/"),c=i("EGZi"),d=i("bRrM"),p=i("+E39"),v=i("06OY").fastKey,h=i("LIJb"),m=p?"_s":"size",f=function(t,e){var i,a=v(e);if("F"!==a)return t._i[a];for(i=t._f;i;i=i.n)if(i.k==e)return i};t.exports={getConstructor:function(t,e,i,u){var c=t(function(t,a){s(t,c,e,"_i"),t._t=e,t._i=r(null),t._f=void 0,t._l=void 0,t[m]=0,void 0!=a&&o(a,i,t[u],t)});return l(c.prototype,{clear:function(){for(var t=h(this,e),i=t._i,a=t._f;a;a=a.n)a.r=!0,a.p&&(a.p=a.p.n=void 0),delete i[a.i];t._f=t._l=void 0,t[m]=0},delete:function(t){var i=h(this,e),a=f(i,t);if(a){var r=a.n,l=a.p;delete i._i[a.i],a.r=!0,l&&(l.n=r),r&&(r.p=l),i._f==a&&(i._f=r),i._l==a&&(i._l=l),i[m]--}return!!a},forEach:function(t){h(this,e);for(var i,a=n(t,arguments.length>1?arguments[1]:void 0,3);i=i?i.n:this._f;)for(a(i.v,i.k,this);i&&i.r;)i=i.p},has:function(t){return!!f(h(this,e),t)}}),p&&a(c.prototype,"size",{get:function(){return h(this,e)[m]}}),c},def:function(t,e,i){var a,r,l=f(t,e);return l?l.v=i:(t._l=l={i:r=v(e,!0),k:e,v:i,p:a=t._l,n:void 0,r:!1},t._f||(t._f=l),a&&(a.n=l),t[m]++,"F"!==r&&(t._i[r]=l)),t},getEntry:f,setStrong:function(t,e,i){u(t,e,function(t,i){this._t=h(t,e),this._k=i,this._l=void 0},function(){for(var t=this._k,e=this._l;e&&e.r;)e=e.p;return this._t&&(this._l=e=e?e.n:this._t._f)?c(0,"keys"==t?e.k:"values"==t?e.v:[e.k,e.v]):(this._t=void 0,c(1))},i?"entries":"values",!i,!0),d(e)}}},ALrJ:function(t,e,i){var a=i("+ZMJ"),r=i("MU5D"),l=i("sB3e"),n=i("QRG4"),s=i("oeOm");t.exports=function(t,e){var i=1==t,o=2==t,u=3==t,c=4==t,d=6==t,p=5==t||d,v=e||s;return function(e,s,h){for(var m,f,b=l(e),g=r(b),k=a(s,h,3),y=n(g.length),P=0,S=i?v(e,y):o?v(e,0):void 0;y>P;P++)if((p||P in g)&&(f=k(m=g[P],P,b),t))if(i)S[P]=f;else if(f)switch(t){case 3:return!0;case 5:return m;case 6:return P;case 2:S.push(m)}else if(c)return!1;return d?-1:u||c?c:S}}},BDhv:function(t,e,i){var a=i("kM2E");a(a.P+a.R,"Set",{toJSON:i("m9gC")("Set")})},BuTG:function(t,e){},Cdx3:function(t,e,i){var a=i("sB3e"),r=i("lktj");i("uqUo")("keys",function(){return function(t){return r(a(t))}})},ESA3:function(t,e){},HpRW:function(t,e,i){"use strict";var a=i("kM2E"),r=i("lOnJ"),l=i("+ZMJ"),n=i("NWt+");t.exports=function(t){a(a.S,t,{from:function(t){var e,i,a,s,o=arguments[1];return r(this),(e=void 0!==o)&&r(o),void 0==t?new this:(i=[],e?(a=0,s=l(o,arguments[2],2),n(t,!1,function(t){i.push(s(t,a++))})):n(t,!1,i.push,i),new this(i))}})}},LIJb:function(t,e,i){var a=i("EqjI");t.exports=function(t,e){if(!a(t)||t._t!==e)throw TypeError("Incompatible receiver, "+e+" required!");return t}},N3DD:function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=i("woOf"),r=i.n(a),l=i("mRsl"),n=i("s/Rn"),s=i("UgCr"),o={name:"ProductInfoDetail",props:{value:Object,isEdit:{type:Boolean,default:!1}},data:function(){return{hasEditCreated:!1,selectProductCateValue:[],productCateOptions:[],brandOptions:[],rules:{name:[{required:!0,message:"请输入商品名称",trigger:"blur"},{min:2,max:140,message:"长度在 2 到 140 个字符",trigger:"blur"}],subTitle:[{required:!0,message:"请输入商品副标题",trigger:"blur"}],productCategoryId:[{required:!0,message:"请选择商品分类",trigger:"blur"}],brandId:[{required:!0,message:"请选择商品品牌",trigger:"blur"}],description:[{required:!0,message:"请输入商品介绍",trigger:"blur"}],requiredProp:[{required:!0,message:"该项为必填项",trigger:"blur"}]}}},created:function(){this.getProductCateList(),this.getBrandList()},computed:{productId:function(){return this.value.id}},watch:{productId:function(t){this.isEdit&&(this.hasEditCreated||void 0!==t&&null!=t&&0!==t&&this.handleEditCreated())},selectProductCateValue:function(t){null!=t&&2===t.length?(this.value.productCategoryId=t[1],this.value.productCategoryName=this.getCateNameById(this.value.productCategoryId)):(this.value.productCategoryId=null,this.value.productCategoryName=null)}},methods:{handleEditCreated:function(){null!=this.value.productCategoryId&&(this.selectProductCateValue.push(this.value.cateParentId),this.selectProductCateValue.push(this.value.productCategoryId)),this.hasEditCreated=!0},getProductCateList:function(){var t=this;Object(l.c)().then(function(e){var i=e.data;t.productCateOptions=[];for(var a=0;a<i.length;a++){var r=[];if(null!=i[a].children&&i[a].children.length>0)for(var l=0;l<i[a].children.length;l++)r.push({label:i[a].children[l].name,value:i[a].children[l].id});t.productCateOptions.push({label:i[a].name,value:i[a].id,children:r})}})},getBrandList:function(){var t=this;Object(n.a)({pageNum:1,pageSize:100}).then(function(e){t.brandOptions=[];for(var i=e.data.list,a=0;a<i.length;a++)t.brandOptions.push({label:i[a].name,value:i[a].id})})},getCateNameById:function(t){for(var e=null,i=0;i<this.productCateOptions.length;i++)for(var a=0;a<this.productCateOptions[i].children.length;a++)if(this.productCateOptions[i].children[a].value===t)return e=this.productCateOptions[i].children[a].label;return e},handleNext:function(t){var e=this;this.$refs[t].validate(function(t){if(!t)return e.$message({message:"验证失败",type:"error",duration:1e3}),!1;e.$emit("nextStep")})},handleBrandChange:function(t){for(var e="",i=0;i<this.brandOptions.length;i++)if(this.brandOptions[i].value===t){e=this.brandOptions[i].label;break}this.value.brandName=e}}},u={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticStyle:{"margin-top":"50px"}},[i("el-form",{ref:"productInfoForm",staticClass:"form-inner-container",attrs:{model:t.value,rules:t.rules,"label-width":"120px",size:"small"}},[i("el-form-item",{attrs:{label:"商品分类：",prop:"productCategoryId"}},[i("el-cascader",{attrs:{options:t.productCateOptions},model:{value:t.selectProductCateValue,callback:function(e){t.selectProductCateValue=e},expression:"selectProductCateValue"}})],1),t._v(" "),i("el-form-item",{attrs:{label:"商品名称：",prop:"name"}},[i("el-input",{model:{value:t.value.name,callback:function(e){t.$set(t.value,"name",e)},expression:"value.name"}})],1),t._v(" "),i("el-form-item",{attrs:{label:"副标题：",prop:"subTitle"}},[i("el-input",{model:{value:t.value.subTitle,callback:function(e){t.$set(t.value,"subTitle",e)},expression:"value.subTitle"}})],1),t._v(" "),i("el-form-item",{attrs:{label:"商品品牌：",prop:"brandId"}},[i("el-select",{attrs:{placeholder:"请选择品牌"},on:{change:t.handleBrandChange},model:{value:t.value.brandId,callback:function(e){t.$set(t.value,"brandId",e)},expression:"value.brandId"}},t._l(t.brandOptions,function(t){return i("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})}),1)],1),t._v(" "),i("el-form-item",{attrs:{label:"商品介绍："}},[i("el-input",{attrs:{autoSize:!0,type:"textarea",placeholder:"请输入内容"},model:{value:t.value.description,callback:function(e){t.$set(t.value,"description",e)},expression:"value.description"}})],1),t._v(" "),i("el-form-item",{attrs:{label:"商品货号："}},[i("el-input",{model:{value:t.value.productSn,callback:function(e){t.$set(t.value,"productSn",e)},expression:"value.productSn"}})],1),t._v(" "),i("el-form-item",{attrs:{label:"商品售价："}},[i("el-input",{model:{value:t.value.price,callback:function(e){t.$set(t.value,"price",e)},expression:"value.price"}})],1),t._v(" "),i("el-form-item",{attrs:{label:"市场价："}},[i("el-input",{model:{value:t.value.originalPrice,callback:function(e){t.$set(t.value,"originalPrice",e)},expression:"value.originalPrice"}})],1),t._v(" "),i("el-form-item",{attrs:{label:"商品库存："}},[i("el-input",{model:{value:t.value.stock,callback:function(e){t.$set(t.value,"stock",e)},expression:"value.stock"}})],1),t._v(" "),i("el-form-item",{attrs:{label:"计量单位："}},[i("el-input",{model:{value:t.value.unit,callback:function(e){t.$set(t.value,"unit",e)},expression:"value.unit"}})],1),t._v(" "),i("el-form-item",{attrs:{label:"商品重量："}},[i("el-input",{staticStyle:{width:"300px"},model:{value:t.value.weight,callback:function(e){t.$set(t.value,"weight",e)},expression:"value.weight"}}),t._v(" "),i("span",{staticStyle:{"margin-left":"20px"}},[t._v("克")])],1),t._v(" "),i("el-form-item",{attrs:{label:"排序"}},[i("el-input",{model:{value:t.value.sort,callback:function(e){t.$set(t.value,"sort",e)},expression:"value.sort"}})],1),t._v(" "),i("el-form-item",{staticStyle:{"text-align":"center"}},[i("el-button",{attrs:{type:"primary",size:"medium"},on:{click:function(e){return t.handleNext("productInfoForm")}}},[t._v("下一步，填写商品促销")])],1)],1)],1)},staticRenderFns:[]};var c=i("VU/8")(o,u,!1,function(t){i("jJx3")},"data-v-64e1088a",null).exports,d=i("vLgD");var p={name:"ProductSaleDetail",props:{value:Object,isEdit:{type:Boolean,default:!1}},data:function(){return{pickerOptions1:{disabledDate:function(t){return t.getTime()<Date.now()}}}},created:function(){var t,e=this;this.isEdit||(t={defaultStatus:0},Object(d.a)({url:"/memberLevel/list",method:"get",params:t})).then(function(t){for(var i=[],a=0;a<t.data.length;a++){var r=t.data[a];i.push({memberLevelId:r.id,memberLevelName:r.name})}e.value.memberPriceList=i})},computed:{selectServiceList:{get:function(){var t=[];if(void 0===this.value.serviceIds||null==this.value.serviceIds||""===this.value.serviceIds)return t;for(var e=this.value.serviceIds.split(","),i=0;i<e.length;i++)t.push(Number(e[i]));return t},set:function(t){var e="";if(null!=t&&t.length>0){for(var i=0;i<t.length;i++)e+=t[i]+",";e.endsWith(",")&&(e=e.substr(0,e.length-1)),this.value.serviceIds=e}else this.value.serviceIds=null}}},methods:{handleEditCreated:function(){var t=this.value.serviceIds.split(",");console.log("handleEditCreated",t);for(var e=0;e<t.length;e++)this.selectServiceList.push(Number(t[e]))},handleRemoveProductLadder:function(t,e){var i=this.value.productLadderList;1===i.length?(i.pop(),i.push({count:0,discount:0,price:0})):i.splice(t,1)},handleAddProductLadder:function(t,e){var i=this.value.productLadderList;i.length<3?i.push({count:0,discount:0,price:0}):this.$message({message:"最多只能添加三条",type:"warning"})},handleRemoveFullReduction:function(t,e){var i=this.value.productFullReductionList;1===i.length?(i.pop(),i.push({fullPrice:0,reducePrice:0})):i.splice(t,1)},handleAddFullReduction:function(t,e){var i=this.value.productFullReductionList;i.length<3?i.push({fullPrice:0,reducePrice:0}):this.$message({message:"最多只能添加三条",type:"warning"})},handlePrev:function(){this.$emit("prevStep")},handleNext:function(){this.$emit("nextStep")}}},v={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticStyle:{"margin-top":"50px"}},[i("el-form",{ref:"productSaleForm",staticClass:"form-inner-container",attrs:{model:t.value,"label-width":"120px",size:"small"}},[i("el-form-item",{attrs:{label:"赠送积分："}},[i("el-input",{model:{value:t.value.giftPoint,callback:function(e){t.$set(t.value,"giftPoint",e)},expression:"value.giftPoint"}})],1),t._v(" "),i("el-form-item",{attrs:{label:"赠送成长值："}},[i("el-input",{model:{value:t.value.giftGrowth,callback:function(e){t.$set(t.value,"giftGrowth",e)},expression:"value.giftGrowth"}})],1),t._v(" "),i("el-form-item",{attrs:{label:"积分购买限制："}},[i("el-input",{model:{value:t.value.usePointLimit,callback:function(e){t.$set(t.value,"usePointLimit",e)},expression:"value.usePointLimit"}})],1),t._v(" "),i("el-form-item",{attrs:{label:"预告商品："}},[i("el-switch",{attrs:{"active-value":1,"inactive-value":0},model:{value:t.value.previewStatus,callback:function(e){t.$set(t.value,"previewStatus",e)},expression:"value.previewStatus"}})],1),t._v(" "),i("el-form-item",{attrs:{label:"商品上架："}},[i("el-switch",{attrs:{"active-value":1,"inactive-value":0},model:{value:t.value.publishStatus,callback:function(e){t.$set(t.value,"publishStatus",e)},expression:"value.publishStatus"}})],1),t._v(" "),i("el-form-item",{attrs:{label:"商品推荐："}},[i("span",{staticStyle:{"margin-right":"10px"}},[t._v("新品")]),t._v(" "),i("el-switch",{attrs:{"active-value":1,"inactive-value":0},model:{value:t.value.newStatus,callback:function(e){t.$set(t.value,"newStatus",e)},expression:"value.newStatus"}}),t._v(" "),i("span",{staticStyle:{"margin-left":"10px","margin-right":"10px"}},[t._v("推荐")]),t._v(" "),i("el-switch",{attrs:{"active-value":1,"inactive-value":0},model:{value:t.value.recommandStatus,callback:function(e){t.$set(t.value,"recommandStatus",e)},expression:"value.recommandStatus"}})],1),t._v(" "),i("el-form-item",{attrs:{label:"服务保证："}},[i("el-checkbox-group",{model:{value:t.selectServiceList,callback:function(e){t.selectServiceList=e},expression:"selectServiceList"}},[i("el-checkbox",{attrs:{label:1}},[t._v("无忧退货")]),t._v(" "),i("el-checkbox",{attrs:{label:2}},[t._v("快速退款")]),t._v(" "),i("el-checkbox",{attrs:{label:3}},[t._v("免费包邮")])],1)],1),t._v(" "),i("el-form-item",{attrs:{label:"详细页标题："}},[i("el-input",{model:{value:t.value.detailTitle,callback:function(e){t.$set(t.value,"detailTitle",e)},expression:"value.detailTitle"}})],1),t._v(" "),i("el-form-item",{attrs:{label:"详细页描述："}},[i("el-input",{model:{value:t.value.detailDesc,callback:function(e){t.$set(t.value,"detailDesc",e)},expression:"value.detailDesc"}})],1),t._v(" "),i("el-form-item",{attrs:{label:"商品关键字："}},[i("el-input",{model:{value:t.value.keywords,callback:function(e){t.$set(t.value,"keywords",e)},expression:"value.keywords"}})],1),t._v(" "),i("el-form-item",{attrs:{label:"商品备注："}},[i("el-input",{attrs:{type:"textarea",autoSize:!0},model:{value:t.value.note,callback:function(e){t.$set(t.value,"note",e)},expression:"value.note"}})],1),t._v(" "),i("el-form-item",{attrs:{label:"选择优惠方式："}},[i("el-radio-group",{attrs:{size:"small"},model:{value:t.value.promotionType,callback:function(e){t.$set(t.value,"promotionType",e)},expression:"value.promotionType"}},[i("el-radio-button",{attrs:{label:0}},[t._v("无优惠")]),t._v(" "),i("el-radio-button",{attrs:{label:1}},[t._v("特惠促销")]),t._v(" "),i("el-radio-button",{attrs:{label:2}},[t._v("会员价格")]),t._v(" "),i("el-radio-button",{attrs:{label:3}},[t._v("阶梯价格")]),t._v(" "),i("el-radio-button",{attrs:{label:4}},[t._v("满减价格")])],1)],1),t._v(" "),i("el-form-item",{directives:[{name:"show",rawName:"v-show",value:1===t.value.promotionType,expression:"value.promotionType===1"}]},[i("div",[t._v("\n        开始时间：\n        "),i("el-date-picker",{attrs:{type:"datetime","picker-options":t.pickerOptions1,placeholder:"选择开始时间"},model:{value:t.value.promotionStartTime,callback:function(e){t.$set(t.value,"promotionStartTime",e)},expression:"value.promotionStartTime"}})],1),t._v(" "),i("div",{staticClass:"littleMargin"},[t._v("\n        结束时间：\n        "),i("el-date-picker",{attrs:{type:"datetime","picker-options":t.pickerOptions1,placeholder:"选择结束时间"},model:{value:t.value.promotionEndTime,callback:function(e){t.$set(t.value,"promotionEndTime",e)},expression:"value.promotionEndTime"}})],1),t._v(" "),i("div",{staticClass:"littleMargin"},[t._v("\n        促销价格：\n        "),i("el-input",{staticStyle:{width:"220px"},attrs:{placeholder:"输入促销价格"},model:{value:t.value.promotionPrice,callback:function(e){t.$set(t.value,"promotionPrice",e)},expression:"value.promotionPrice"}})],1)]),t._v(" "),i("el-form-item",{directives:[{name:"show",rawName:"v-show",value:2===t.value.promotionType,expression:"value.promotionType===2"}]},t._l(t.value.memberPriceList,function(e,a){return i("div",{class:{littleMargin:0!==a}},[t._v("\n        "+t._s(e.memberLevelName)+"：\n        "),i("el-input",{staticStyle:{width:"200px"},model:{value:e.memberPrice,callback:function(i){t.$set(e,"memberPrice",i)},expression:"item.memberPrice"}})],1)}),0),t._v(" "),i("el-form-item",{directives:[{name:"show",rawName:"v-show",value:3===t.value.promotionType,expression:"value.promotionType===3"}]},[i("el-table",{staticStyle:{width:"80%"},attrs:{data:t.value.productLadderList,border:""}},[i("el-table-column",{attrs:{label:"数量",align:"center",width:"120"},scopedSlots:t._u([{key:"default",fn:function(e){return[i("el-input",{model:{value:e.row.count,callback:function(i){t.$set(e.row,"count",i)},expression:"scope.row.count"}})]}}])}),t._v(" "),i("el-table-column",{attrs:{label:"折扣",align:"center",width:"120"},scopedSlots:t._u([{key:"default",fn:function(e){return[i("el-input",{model:{value:e.row.discount,callback:function(i){t.$set(e.row,"discount",i)},expression:"scope.row.discount"}})]}}])}),t._v(" "),i("el-table-column",{attrs:{align:"center",label:"操作"},scopedSlots:t._u([{key:"default",fn:function(e){return[i("el-button",{attrs:{type:"text"},on:{click:function(i){return t.handleRemoveProductLadder(e.$index,e.row)}}},[t._v("删除")]),t._v(" "),i("el-button",{attrs:{type:"text"},on:{click:function(i){return t.handleAddProductLadder(e.$index,e.row)}}},[t._v("添加")])]}}])})],1)],1),t._v(" "),i("el-form-item",{directives:[{name:"show",rawName:"v-show",value:4===t.value.promotionType,expression:"value.promotionType===4"}]},[i("el-table",{staticStyle:{width:"80%"},attrs:{data:t.value.productFullReductionList,border:""}},[i("el-table-column",{attrs:{label:"满",align:"center",width:"120"},scopedSlots:t._u([{key:"default",fn:function(e){return[i("el-input",{model:{value:e.row.fullPrice,callback:function(i){t.$set(e.row,"fullPrice",i)},expression:"scope.row.fullPrice"}})]}}])}),t._v(" "),i("el-table-column",{attrs:{label:"立减",align:"center",width:"120"},scopedSlots:t._u([{key:"default",fn:function(e){return[i("el-input",{model:{value:e.row.reducePrice,callback:function(i){t.$set(e.row,"reducePrice",i)},expression:"scope.row.reducePrice"}})]}}])}),t._v(" "),i("el-table-column",{attrs:{align:"center",label:"操作"},scopedSlots:t._u([{key:"default",fn:function(e){return[i("el-button",{attrs:{type:"text"},on:{click:function(i){return t.handleRemoveFullReduction(e.$index,e.row)}}},[t._v("删除")]),t._v(" "),i("el-button",{attrs:{type:"text"},on:{click:function(i){return t.handleAddFullReduction(e.$index,e.row)}}},[t._v("添加")])]}}])})],1)],1),t._v(" "),i("el-form-item",{staticStyle:{"text-align":"center"}},[i("el-button",{attrs:{size:"medium"},on:{click:t.handlePrev}},[t._v("上一步，填写商品信息")]),t._v(" "),i("el-button",{attrs:{type:"primary",size:"medium"},on:{click:t.handleNext}},[t._v("下一步，填写商品属性")])],1)],1)],1)},staticRenderFns:[]};var h=i("VU/8")(p,v,!1,function(t){i("j3sQ")},"data-v-c7393d6e",null).exports,m=i("mvHQ"),f=i.n(m),b=i("c/Tr"),g=i.n(b),k=i("lHA8"),y=i.n(k),P=i("KhLR"),S=i("3idm"),_=i("TZVV"),w=i("//Fk"),x=i.n(w),L=i("ZW30"),A={name:"multiUpload",props:{value:Array,maxCount:{type:Number,default:5}},data:function(){return{dataObj:{policy:"",signature:"",key:"",ossaccessKeyId:"",dir:"",host:""},dialogVisible:!1,dialogImageUrl:null,useOss:!1,ossUploadUrl:"http://macro-oss.oss-cn-shenzhen.aliyuncs.com",minioUploadUrl:"http://localhost:8080/minio/upload"}},computed:{fileList:function(){for(var t=[],e=0;e<this.value.length;e++)t.push({url:this.value[e]});return t}},methods:{emitInput:function(t){for(var e=[],i=0;i<t.length;i++)e.push(t[i].url);this.$emit("input",e)},handleRemove:function(t,e){this.emitInput(e)},handlePreview:function(t){this.dialogVisible=!0,this.dialogImageUrl=t.url},beforeUpload:function(t){var e=this;return!this.useOss||new x.a(function(t,i){Object(L.a)().then(function(i){e.dataObj.policy=i.data.policy,e.dataObj.signature=i.data.signature,e.dataObj.ossaccessKeyId=i.data.accessKeyId,e.dataObj.key=i.data.dir+"/${filename}",e.dataObj.dir=i.data.dir,e.dataObj.host=i.data.host,t(!0)}).catch(function(t){console.log(t),i(!1)})})},handleUploadSuccess:function(t,e){var i=this.dataObj.host+"/"+this.dataObj.dir+"/"+e.name;this.useOss||(i=t.data.url),this.fileList.push({name:e.name,url:i}),this.emitInput(this.fileList)},handleExceed:function(t,e){this.$message({message:"最多只能上传"+this.maxCount+"张图片",type:"warning",duration:1e3})}}},C={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",[i("el-upload",{attrs:{action:t.useOss?t.ossUploadUrl:t.minioUploadUrl,data:t.useOss?t.dataObj:null,"list-type":"picture-card","file-list":t.fileList,"before-upload":t.beforeUpload,"on-remove":t.handleRemove,"on-success":t.handleUploadSuccess,"on-preview":t.handlePreview,limit:t.maxCount,"on-exceed":t.handleExceed}},[i("i",{staticClass:"el-icon-plus"})]),t._v(" "),i("el-dialog",{attrs:{visible:t.dialogVisible},on:{"update:visible":function(e){t.dialogVisible=e}}},[i("img",{attrs:{width:"100%",src:t.dialogImageUrl,alt:""}})])],1)},staticRenderFns:[]};var O=i("VU/8")(A,C,!1,function(t){i("pJas")},null,null).exports,I=i("fZjL"),j=i.n(I),R={name:"editorSlideUpload",props:{color:{type:String,default:"#1890ff"}},data:function(){return{dialogVisible:!1,listObj:{},fileList:[],dataObj:{policy:"",signature:"",key:"",ossaccessKeyId:"",dir:"",host:""}}},methods:{checkAllSuccess:function(){var t=this;return j()(this.listObj).every(function(e){return t.listObj[e].hasSuccess})},handleSubmit:function(){var t=this,e=j()(this.listObj).map(function(e){return t.listObj[e]});this.checkAllSuccess()?(console.log(e),this.$emit("successCBK",e),this.listObj={},this.fileList=[],this.dialogVisible=!1):this.$message("请等待所有图片上传成功 或 出现了网络问题，请刷新页面重新上传！")},handleSuccess:function(t,e){for(var i=e.uid,a=j()(this.listObj),r=0,l=a.length;r<l;r++)if(this.listObj[a[r]].uid===i)return this.listObj[a[r]].url=this.dataObj.host+"/"+this.dataObj.dir+"/"+e.name,void(this.listObj[a[r]].hasSuccess=!0)},handleRemove:function(t){for(var e=t.uid,i=j()(this.listObj),a=0,r=i.length;a<r;a++)if(this.listObj[i[a]].uid===e)return void delete this.listObj[i[a]]},beforeUpload:function(t){var e=this,i=this,a=t.uid;return this.listObj[a]={},new x.a(function(r,l){Object(L.a)().then(function(l){i.dataObj.policy=l.data.policy,i.dataObj.signature=l.data.signature,i.dataObj.ossaccessKeyId=l.data.accessKeyId,i.dataObj.key=l.data.dir+"/${filename}",i.dataObj.dir=l.data.dir,i.dataObj.host=l.data.host,i.listObj[a]={hasSuccess:!1,uid:t.uid,width:e.width,height:e.height},r(!0)}).catch(function(t){console.log(t),l(!1)})})}}},$={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"upload-container"},[i("el-button",{style:{background:t.color,borderColor:t.color},attrs:{icon:"el-icon-upload",size:"mini",type:"primary"},on:{click:function(e){t.dialogVisible=!0}}},[t._v("上传图片\n  ")]),t._v(" "),i("el-dialog",{attrs:{"append-to-body":"",visible:t.dialogVisible},on:{"update:visible":function(e){t.dialogVisible=e}}},[i("el-upload",{staticClass:"editor-slide-upload",attrs:{action:"http://macro-oss.oss-cn-shenzhen.aliyuncs.com",data:t.dataObj,multiple:!0,"file-list":t.fileList,"show-file-list":!0,"list-type":"picture-card","on-remove":t.handleRemove,"on-success":t.handleSuccess,"before-upload":t.beforeUpload}},[i("el-button",{attrs:{size:"small",type:"primary"}},[t._v("点击上传")])],1),t._v(" "),i("el-button",{on:{click:function(e){t.dialogVisible=!1}}},[t._v("取 消")]),t._v(" "),i("el-button",{attrs:{type:"primary"},on:{click:t.handleSubmit}},[t._v("确 定")])],1)],1)},staticRenderFns:[]};var T=i("VU/8")(R,$,!1,function(t){i("QWke")},"data-v-8ff6ea34",null).exports,E=(i("WQDg"),["advlist anchor autolink autosave code codesample colorpicker colorpicker\n  contextmenu directionality emoticons fullscreen hr image imagetools importcss insertdatetime\n  legacyoutput link lists media nonbreaking noneditable pagebreak paste preview print save searchreplace\n  spellchecker tabfocus table template textcolor textpattern visualblocks visualchars wordcount"]),V=["bold italic underline strikethrough alignleft aligncenter\n  alignright outdent indent  blockquote undo redo removeformat code","hr bullist numlist link image charmap\t preview anchor pagebreak\n    fullscreen insertdatetime media table forecolor backcolor"],N={name:"tinymce",components:{editorImage:T},props:{id:{type:String},value:{type:String,default:""},toolbar:{type:Array,required:!1,default:function(){return[]}},menubar:{default:"file edit insert view format table"},height:{type:Number,required:!1,default:360},width:{type:Number,required:!1,default:720}},data:function(){return{hasChange:!1,hasInit:!1,tinymceId:this.id||"vue-tinymce-"+ +new Date}},watch:{value:function(t){var e=this;!this.hasChange&&this.hasInit&&this.$nextTick(function(){return window.tinymce.get(e.tinymceId).setContent(t)})}},mounted:function(){this.initTinymce()},activated:function(){this.initTinymce()},deactivated:function(){this.destroyTinymce()},methods:{initTinymce:function(){var t=this,e=this;window.tinymce.init({selector:"#"+this.tinymceId,width:this.width,height:this.height,language:"zh_CN",body_class:"panel-body ",object_resizing:!1,toolbar:this.toolbar.length>0?this.toolbar:V,menubar:!1,plugins:E,end_container_on_empty_block:!0,powerpaste_word_import:"clean",code_dialog_height:450,code_dialog_width:1e3,advlist_bullet_styles:"square",advlist_number_styles:"default",imagetools_cors_hosts:["www.tinymce.com","codepen.io"],default_link_target:"_blank",link_title:!1,init_instance_callback:function(i){e.value&&i.setContent(e.value),e.hasInit=!0,i.on("NodeChange Change KeyUp SetContent",function(){t.hasChange=!0,t.$emit("input",i.getContent())})}})},destroyTinymce:function(){window.tinymce.get(this.tinymceId)&&window.tinymce.get(this.tinymceId).destroy()},setContent:function(t){window.tinymce.get(this.tinymceId).setContent(t)},getContent:function(){window.tinymce.get(this.tinymceId).getContent()},imageSuccessCBK:function(t){var e=this;t.forEach(function(t){window.tinymce.get(e.tinymceId).insertContent('<img class="wscnph" src="'+t.url+'" >')})}},destroyed:function(){this.destroyTinymce()}},U={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"tinymce-container editor-container"},[e("textarea",{staticClass:"tinymce-textarea",attrs:{id:this.tinymceId}}),this._v(" "),e("div",{staticClass:"editor-custom-btn-container"},[e("editorImage",{staticClass:"editor-upload-btn",attrs:{color:"#1890ff"},on:{successCBK:this.imageSuccessCBK}})],1)])},staticRenderFns:[]};var D=i("VU/8")(N,U,!1,function(t){i("THZS")},"data-v-822fba42",null).exports,F={name:"ProductAttrDetail",components:{SingleUpload:_.a,MultiUpload:O,Tinymce:D},props:{value:Object,isEdit:{type:Boolean,default:!1}},data:function(){return{hasEditCreated:!1,productAttributeCategoryOptions:[],selectProductAttr:[],selectProductParam:[],selectProductAttrPics:[],addProductAttrValue:"",activeHtmlName:"pc"}},computed:{hasAttrPic:function(){return!(this.selectProductAttrPics.length<1)},productId:function(){return this.value.id},selectProductPics:{get:function(){var t=[];if(void 0===this.value.pic||null==this.value.pic||""===this.value.pic)return t;if(t.push(this.value.pic),void 0===this.value.albumPics||null==this.value.albumPics||""===this.value.albumPics)return t;for(var e=this.value.albumPics.split(","),i=0;i<e.length;i++)t.push(e[i]);return t},set:function(t){if(null==t||0===t.length)this.value.pic=null,this.value.albumPics=null;else if(this.value.pic=t[0],this.value.albumPics="",t.length>1)for(var e=1;e<t.length;e++)this.value.albumPics+=t[e],e!==t.length-1&&(this.value.albumPics+=",")}}},created:function(){this.getProductAttrCateList()},watch:{productId:function(t){this.isEdit&&(this.hasEditCreated||void 0!==t&&null!=t&&0!==t&&this.handleEditCreated())}},methods:{handleEditCreated:function(){null!=this.value.productAttributeCategoryId&&this.handleProductAttrChange(this.value.productAttributeCategoryId),this.hasEditCreated=!0},getProductAttrCateList:function(){var t=this;Object(P.b)({pageNum:1,pageSize:100}).then(function(e){t.productAttributeCategoryOptions=[];for(var i=e.data.list,a=0;a<i.length;a++)t.productAttributeCategoryOptions.push({label:i[a].name,value:i[a].id})})},getProductAttrList:function(t,e){var i=this,a={pageNum:1,pageSize:100,type:t};Object(S.a)(e,a).then(function(e){var a=e.data.list;if(0===t){i.selectProductAttr=[];for(var r=0;r<a.length;r++){var l=[],n=[];i.isEdit&&(1===a[r].handAddStatus&&(l=i.getEditAttrOptions(a[r].id)),n=i.getEditAttrValues(r)),i.selectProductAttr.push({id:a[r].id,name:a[r].name,handAddStatus:a[r].handAddStatus,inputList:a[r].inputList,values:n,options:l})}i.isEdit&&i.refreshProductAttrPics()}else{i.selectProductParam=[];for(var s=0;s<a.length;s++){var o=null;i.isEdit&&(o=i.getEditParamValue(a[s].id)),i.selectProductParam.push({id:a[s].id,name:a[s].name,value:o,inputType:a[s].inputType,inputList:a[s].inputList})}}})},getEditAttrOptions:function(t){for(var e=[],i=0;i<this.value.productAttributeValueList.length;i++){var a=this.value.productAttributeValueList[i];if(a.productAttributeId===t){for(var r=a.value.split(","),l=0;l<r.length;l++)e.push(r[l]);break}}return e},getEditAttrValues:function(t){var e=new y.a;if(0===t)for(var i=0;i<this.value.skuStockList.length;i++){var a=this.value.skuStockList[i],r=JSON.parse(a.spData);null!=r&&r.length>=1&&e.add(r[0].value)}else if(1===t)for(var l=0;l<this.value.skuStockList.length;l++){var n=this.value.skuStockList[l],s=JSON.parse(n.spData);null!=s&&s.length>=2&&e.add(s[1].value)}else for(var o=0;o<this.value.skuStockList.length;o++){var u=this.value.skuStockList[o],c=JSON.parse(u.spData);null!=c&&c.length>=3&&e.add(c[2].value)}return g()(e)},getEditParamValue:function(t){for(var e=0;e<this.value.productAttributeValueList.length;e++)if(t===this.value.productAttributeValueList[e].productAttributeId)return this.value.productAttributeValueList[e].value},handleProductAttrChange:function(t){this.getProductAttrList(0,t),this.getProductAttrList(1,t)},getInputListArr:function(t){return t.split(",")},handleAddProductAttrValue:function(t){var e=this.selectProductAttr[t].options;null!=this.addProductAttrValue&&""!=this.addProductAttrValue?-1===e.indexOf(this.addProductAttrValue)?(this.selectProductAttr[t].options.push(this.addProductAttrValue),this.addProductAttrValue=null):this.$message({message:"属性值不能重复",type:"warning",duration:1e3}):this.$message({message:"属性值不能为空",type:"warning",duration:1e3})},handleRemoveProductAttrValue:function(t,e){this.selectProductAttr[t].options.splice(e,1)},getProductSkuSp:function(t,e){var i=JSON.parse(t.spData);return null!=i&&e<i.length?i[e].value:null},handleRefreshProductSkuList:function(){var t=this;this.$confirm("刷新列表将导致sku信息重新生成，是否要刷新","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){t.refreshProductAttrPics(),t.refreshProductSkuList()})},handleSyncProductSkuPrice:function(){var t=this;this.$confirm("将同步第一个sku的价格到所有sku,是否继续","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){if(null!==t.value.skuStockList&&t.value.skuStockList.length>0){var e=[];e=e.concat(e,t.value.skuStockList);for(var i=t.value.skuStockList[0].price,a=0;a<e.length;a++)e[a].price=i;t.value.skuStockList=[],t.value.skuStockList=t.value.skuStockList.concat(t.value.skuStockList,e)}})},handleSyncProductSkuStock:function(){var t=this;this.$confirm("将同步第一个sku的库存到所有sku,是否继续","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){if(null!==t.value.skuStockList&&t.value.skuStockList.length>0){var e=[];e=e.concat(e,t.value.skuStockList);for(var i=t.value.skuStockList[0].stock,a=t.value.skuStockList[0].lowStock,r=0;r<e.length;r++)e[r].stock=i,e[r].lowStock=a;t.value.skuStockList=[],t.value.skuStockList=t.value.skuStockList.concat(t.value.skuStockList,e)}})},refreshProductSkuList:function(){this.value.skuStockList=[];var t=this.value.skuStockList;if(1===this.selectProductAttr.length)for(var e=this.selectProductAttr[0],i=0;i<e.values.length;i++)t.push({spData:f()([{key:e.name,value:e.values[i]}])});else if(2===this.selectProductAttr.length)for(var a=this.selectProductAttr[0],r=this.selectProductAttr[1],l=0;l<a.values.length;l++)if(0!==r.values.length)for(var n=0;n<r.values.length;n++){var s=[];s.push({key:a.name,value:a.values[l]}),s.push({key:r.name,value:r.values[n]}),t.push({spData:f()(s)})}else t.push({spData:f()([{key:a.name,value:a.values[l]}])});else for(var o=this.selectProductAttr[0],u=this.selectProductAttr[1],c=this.selectProductAttr[2],d=0;d<o.values.length;d++)if(0!==u.values.length)for(var p=0;p<u.values.length;p++)if(0!==c.values.length)for(var v=0;v<c.values.length;v++){var h=[];h.push({key:o.name,value:o.values[d]}),h.push({key:u.name,value:u.values[p]}),h.push({key:c.name,value:c.values[v]}),t.push({spData:f()(h)})}else{var m=[];m.push({key:o.name,value:o.values[d]}),m.push({key:u.name,value:u.values[p]}),t.push({spData:f()(m)})}else t.push({spData:f()([{key:o.name,value:o.values[d]}])})},refreshProductAttrPics:function(){if(this.selectProductAttrPics=[],this.selectProductAttr.length>=1)for(var t=this.selectProductAttr[0].values,e=0;e<t.length;e++){var i=null;this.isEdit&&(i=this.getProductSkuPic(t[e])),this.selectProductAttrPics.push({name:t[e],pic:i})}},getProductSkuPic:function(t){for(var e=0;e<this.value.skuStockList.length;e++){if(t===JSON.parse(this.value.skuStockList[e].spData)[0].value)return this.value.skuStockList[e].pic}return null},mergeProductAttrValue:function(){this.value.productAttributeValueList=[];for(var t=0;t<this.selectProductAttr.length;t++){var e=this.selectProductAttr[t];1===e.handAddStatus&&null!=e.options&&e.options.length>0&&this.value.productAttributeValueList.push({productAttributeId:e.id,value:this.getOptionStr(e.options)})}for(var i=0;i<this.selectProductParam.length;i++){var a=this.selectProductParam[i];this.value.productAttributeValueList.push({productAttributeId:a.id,value:a.value})}},mergeProductAttrPics:function(){for(var t=0;t<this.selectProductAttrPics.length;t++)for(var e=0;e<this.value.skuStockList.length;e++){JSON.parse(this.value.skuStockList[e].spData)[0].value===this.selectProductAttrPics[t].name&&(this.value.skuStockList[e].pic=this.selectProductAttrPics[t].pic)}},getOptionStr:function(t){for(var e="",i=0;i<t.length;i++)e+=t[i],i!=t.length-1&&(e+=",");return e},handleRemoveProductSku:function(t,e){var i=this.value.skuStockList;1===i.length?i.pop():i.splice(t,1)},getParamInputList:function(t){return t.split(",")},handlePrev:function(){this.$emit("prevStep")},handleNext:function(){this.mergeProductAttrValue(),this.mergeProductAttrPics(),this.$emit("nextStep")}}},B={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticStyle:{"margin-top":"50px"}},[i("el-form",{ref:"productAttrForm",staticClass:"form-inner-container",attrs:{model:t.value,"label-width":"120px",size:"small"}},[i("el-form-item",{attrs:{label:"属性类型："}},[i("el-select",{attrs:{placeholder:"请选择属性类型"},on:{change:t.handleProductAttrChange},model:{value:t.value.productAttributeCategoryId,callback:function(e){t.$set(t.value,"productAttributeCategoryId",e)},expression:"value.productAttributeCategoryId"}},t._l(t.productAttributeCategoryOptions,function(t){return i("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})}),1)],1),t._v(" "),i("el-form-item",{attrs:{label:"商品规格："}},[i("el-card",{staticClass:"cardBg",attrs:{shadow:"never"}},t._l(t.selectProductAttr,function(e,a){return i("div",[t._v("\n          "+t._s(e.name)+"：\n          "),0===e.handAddStatus?i("el-checkbox-group",{model:{value:t.selectProductAttr[a].values,callback:function(e){t.$set(t.selectProductAttr[a],"values",e)},expression:"selectProductAttr[idx].values"}},t._l(t.getInputListArr(e.inputList),function(t){return i("el-checkbox",{key:t,staticClass:"littleMarginLeft",attrs:{label:t}})}),1):i("div",[i("el-checkbox-group",{model:{value:t.selectProductAttr[a].values,callback:function(e){t.$set(t.selectProductAttr[a],"values",e)},expression:"selectProductAttr[idx].values"}},t._l(t.selectProductAttr[a].options,function(e,r){return i("div",{staticClass:"littleMarginLeft",staticStyle:{display:"inline-block"}},[i("el-checkbox",{key:e,attrs:{label:e}}),t._v(" "),i("el-button",{staticClass:"littleMarginLeft",attrs:{type:"text"},on:{click:function(e){return t.handleRemoveProductAttrValue(a,r)}}},[t._v("删除\n                ")])],1)}),0),t._v(" "),i("el-input",{staticStyle:{width:"160px","margin-left":"10px"},attrs:{clearable:""},model:{value:t.addProductAttrValue,callback:function(e){t.addProductAttrValue=e},expression:"addProductAttrValue"}}),t._v(" "),i("el-button",{staticClass:"littleMarginLeft",on:{click:function(e){return t.handleAddProductAttrValue(a)}}},[t._v("增加")])],1)],1)}),0),t._v(" "),i("el-table",{staticStyle:{width:"100%","margin-top":"20px"},attrs:{data:t.value.skuStockList,border:""}},[t._l(t.selectProductAttr,function(e,a){return i("el-table-column",{key:e.id,attrs:{label:e.name,align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v("\n            "+t._s(t.getProductSkuSp(e.row,a))+"\n          ")]}}],null,!0)})}),t._v(" "),i("el-table-column",{attrs:{label:"销售价格",width:"100",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[i("el-input",{model:{value:e.row.price,callback:function(i){t.$set(e.row,"price",i)},expression:"scope.row.price"}})]}}])}),t._v(" "),i("el-table-column",{attrs:{label:"促销价格",width:"100",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[i("el-input",{model:{value:e.row.promotionPrice,callback:function(i){t.$set(e.row,"promotionPrice",i)},expression:"scope.row.promotionPrice"}})]}}])}),t._v(" "),i("el-table-column",{attrs:{label:"商品库存",width:"80",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[i("el-input",{model:{value:e.row.stock,callback:function(i){t.$set(e.row,"stock",i)},expression:"scope.row.stock"}})]}}])}),t._v(" "),i("el-table-column",{attrs:{label:"库存预警值",width:"80",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[i("el-input",{model:{value:e.row.lowStock,callback:function(i){t.$set(e.row,"lowStock",i)},expression:"scope.row.lowStock"}})]}}])}),t._v(" "),i("el-table-column",{attrs:{label:"SKU编号",width:"160",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[i("el-input",{model:{value:e.row.skuCode,callback:function(i){t.$set(e.row,"skuCode",i)},expression:"scope.row.skuCode"}})]}}])}),t._v(" "),i("el-table-column",{attrs:{label:"操作",width:"80",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[i("el-button",{attrs:{type:"text"},on:{click:function(i){return t.handleRemoveProductSku(e.$index,e.row)}}},[t._v("删除\n            ")])]}}])})],2),t._v(" "),i("el-button",{staticStyle:{"margin-top":"20px"},attrs:{type:"primary"},on:{click:t.handleRefreshProductSkuList}},[t._v("刷新列表\n      ")]),t._v(" "),i("el-button",{staticStyle:{"margin-top":"20px"},attrs:{type:"primary"},on:{click:t.handleSyncProductSkuPrice}},[t._v("同步价格\n      ")]),t._v(" "),i("el-button",{staticStyle:{"margin-top":"20px"},attrs:{type:"primary"},on:{click:t.handleSyncProductSkuStock}},[t._v("同步库存\n      ")])],1),t._v(" "),t.hasAttrPic?i("el-form-item",{attrs:{label:"属性图片："}},[i("el-card",{staticClass:"cardBg",attrs:{shadow:"never"}},t._l(t.selectProductAttrPics,function(e,a){return i("div",[i("span",[t._v(t._s(e.name)+":")]),t._v(" "),i("single-upload",{staticStyle:{width:"300px",display:"inline-block","margin-left":"10px"},model:{value:e.pic,callback:function(i){t.$set(e,"pic",i)},expression:"item.pic"}})],1)}),0)],1):t._e(),t._v(" "),i("el-form-item",{attrs:{label:"商品参数："}},[i("el-card",{staticClass:"cardBg",attrs:{shadow:"never"}},t._l(t.selectProductParam,function(e,a){return i("div",{class:{littleMarginTop:0!==a}},[i("div",{staticClass:"paramInputLabel"},[t._v(t._s(e.name)+":")]),t._v(" "),1===e.inputType?i("el-select",{staticClass:"paramInput",model:{value:t.selectProductParam[a].value,callback:function(e){t.$set(t.selectProductParam[a],"value",e)},expression:"selectProductParam[index].value"}},t._l(t.getParamInputList(e.inputList),function(t){return i("el-option",{key:t,attrs:{label:t,value:t}})}),1):i("el-input",{staticClass:"paramInput",model:{value:t.selectProductParam[a].value,callback:function(e){t.$set(t.selectProductParam[a],"value",e)},expression:"selectProductParam[index].value"}})],1)}),0)],1),t._v(" "),i("el-form-item",{attrs:{label:"商品相册："}},[i("multi-upload",{model:{value:t.selectProductPics,callback:function(e){t.selectProductPics=e},expression:"selectProductPics"}})],1),t._v(" "),i("el-form-item",{attrs:{label:"商品详情："}},[i("el-tabs",{attrs:{type:"card"},model:{value:t.activeHtmlName,callback:function(e){t.activeHtmlName=e},expression:"activeHtmlName"}},[i("el-tab-pane",{attrs:{label:"电脑端详情",name:"pc"}},[i("tinymce",{attrs:{width:595,height:300},model:{value:t.value.detailHtml,callback:function(e){t.$set(t.value,"detailHtml",e)},expression:"value.detailHtml"}})],1),t._v(" "),i("el-tab-pane",{attrs:{label:"移动端详情",name:"mobile"}},[i("tinymce",{attrs:{width:595,height:300},model:{value:t.value.detailMobileHtml,callback:function(e){t.$set(t.value,"detailMobileHtml",e)},expression:"value.detailMobileHtml"}})],1)],1)],1),t._v(" "),i("el-form-item",{staticStyle:{"text-align":"center"}},[i("el-button",{attrs:{size:"medium"},on:{click:t.handlePrev}},[t._v("上一步，填写商品促销")]),t._v(" "),i("el-button",{attrs:{type:"primary",size:"medium"},on:{click:t.handleNext}},[t._v("下一步，选择商品关联")])],1)],1)],1)},staticRenderFns:[]};var H=i("VU/8")(F,B,!1,function(t){i("wsSU")},"data-v-df5192da",null).exports;var z={name:"ProductRelationDetail",props:{value:Object,isEdit:{type:Boolean,default:!1}},data:function(){return{subjectList:[],subjectTitles:["待选择","已选择"],prefrenceAreaList:[],prefrenceAreaTitles:["待选择","已选择"]}},created:function(){this.getSubjectList(),this.getPrefrenceAreaList()},computed:{selectSubject:{get:function(){var t=[];if(null==this.value.subjectProductRelationList||this.value.subjectProductRelationList.length<=0)return t;for(var e=0;e<this.value.subjectProductRelationList.length;e++)t.push(this.value.subjectProductRelationList[e].subjectId);return t},set:function(t){this.value.subjectProductRelationList=[];for(var e=0;e<t.length;e++)this.value.subjectProductRelationList.push({subjectId:t[e]})}},selectPrefrenceArea:{get:function(){var t=[];if(null==this.value.prefrenceAreaProductRelationList||this.value.prefrenceAreaProductRelationList.length<=0)return t;for(var e=0;e<this.value.prefrenceAreaProductRelationList.length;e++)t.push(this.value.prefrenceAreaProductRelationList[e].prefrenceAreaId);return t},set:function(t){this.value.prefrenceAreaProductRelationList=[];for(var e=0;e<t.length;e++)this.value.prefrenceAreaProductRelationList.push({prefrenceAreaId:t[e]})}}},methods:{filterMethod:function(t,e){return e.label.indexOf(t)>-1},getSubjectList:function(){var t=this;Object(d.a)({url:"/subject/listAll",method:"get"}).then(function(e){for(var i=e.data,a=0;a<i.length;a++)t.subjectList.push({label:i[a].title,key:i[a].id})})},getPrefrenceAreaList:function(){var t=this;Object(d.a)({url:"/prefrenceArea/listAll",method:"get"}).then(function(e){for(var i=e.data,a=0;a<i.length;a++)t.prefrenceAreaList.push({label:i[a].name,key:i[a].id})})},handlePrev:function(){this.$emit("prevStep")},handleFinishCommit:function(){this.$emit("finishCommit",this.isEdit)}}},M={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticStyle:{"margin-top":"50px"}},[i("el-form",{ref:"productRelationForm",staticClass:"form-inner-container",attrs:{model:t.value,"label-width":"120px",size:"small"}},[i("el-form-item",{attrs:{label:"关联专题："}},[i("el-transfer",{staticStyle:{display:"inline-block"},attrs:{filterable:"","filter-method":t.filterMethod,"filter-placeholder":"请输入专题名称",titles:t.subjectTitles,data:t.subjectList},model:{value:t.selectSubject,callback:function(e){t.selectSubject=e},expression:"selectSubject"}})],1),t._v(" "),i("el-form-item",{attrs:{label:"关联优选："}},[i("el-transfer",{staticStyle:{display:"inline-block"},attrs:{filterable:"","filter-method":t.filterMethod,"filter-placeholder":"请输入优选名称",titles:t.prefrenceAreaTitles,data:t.prefrenceAreaList},model:{value:t.selectPrefrenceArea,callback:function(e){t.selectPrefrenceArea=e},expression:"selectPrefrenceArea"}})],1),t._v(" "),i("el-form-item",{staticStyle:{"text-align":"center"}},[i("el-button",{attrs:{size:"medium"},on:{click:t.handlePrev}},[t._v("上一步，填写商品属性")]),t._v(" "),i("el-button",{attrs:{type:"primary",size:"medium"},on:{click:t.handleFinishCommit}},[t._v("完成，提交商品")])],1)],1)],1)},staticRenderFns:[]};var q={albumPics:"",brandId:null,brandName:"",deleteStatus:0,description:"",detailDesc:"",detailHtml:"",detailMobileHtml:"",detailTitle:"",feightTemplateId:0,flashPromotionCount:0,flashPromotionId:0,flashPromotionPrice:0,flashPromotionSort:0,giftPoint:0,giftGrowth:0,keywords:"",lowStock:0,name:"",newStatus:0,note:"",originalPrice:0,pic:"",memberPriceList:[],productFullReductionList:[{fullPrice:0,reducePrice:0}],productLadderList:[{count:0,discount:0,price:0}],previewStatus:0,price:0,productAttributeCategoryId:null,productAttributeValueList:[],skuStockList:[],subjectProductRelationList:[],prefrenceAreaProductRelationList:[],productCategoryId:null,productCategoryName:"",productSn:"",promotionEndTime:"",promotionPerLimit:0,promotionPrice:null,promotionStartTime:"",promotionType:0,publishStatus:0,recommandStatus:0,sale:0,serviceIds:"",sort:0,stock:0,subTitle:"",unit:"",usePointLimit:0,verifyStatus:0,weight:0},J={name:"ProductDetail",components:{ProductInfoDetail:c,ProductSaleDetail:h,ProductAttrDetail:H,ProductRelationDetail:i("VU/8")(z,M,!1,function(t){i("ESA3")},"data-v-1c218512",null).exports},props:{isEdit:{type:Boolean,default:!1}},data:function(){return{active:0,productParam:r()({},q),showStatus:[!0,!1,!1,!1]}},created:function(){var t=this;this.isEdit&&Object(s.c)(this.$route.query.id).then(function(e){t.productParam=e.data})},methods:{hideAll:function(){for(var t=0;t<this.showStatus.length;t++)this.showStatus[t]=!1},prevStep:function(){this.active>0&&this.active<this.showStatus.length&&(this.active--,this.hideAll(),this.showStatus[this.active]=!0)},nextStep:function(){this.active<this.showStatus.length-1&&(this.active++,this.hideAll(),this.showStatus[this.active]=!0)},finishCommit:function(t){var e=this;this.$confirm("是否要提交该产品","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){t?Object(s.e)(e.$route.query.id,e.productParam).then(function(t){e.$message({type:"success",message:"提交成功",duration:1e3}),e.$router.back()}):Object(s.a)(e.productParam).then(function(t){e.$message({type:"success",message:"提交成功",duration:1e3}),location.reload()})})}}},K={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("el-card",{staticClass:"form-container",attrs:{shadow:"never"}},[i("el-steps",{attrs:{active:t.active,"finish-status":"success","align-center":""}},[i("el-step",{attrs:{title:"填写商品信息"}}),t._v(" "),i("el-step",{attrs:{title:"填写商品促销"}}),t._v(" "),i("el-step",{attrs:{title:"填写商品属性"}}),t._v(" "),i("el-step",{attrs:{title:"选择商品关联"}})],1),t._v(" "),i("product-info-detail",{directives:[{name:"show",rawName:"v-show",value:t.showStatus[0],expression:"showStatus[0]"}],attrs:{"is-edit":t.isEdit},on:{nextStep:t.nextStep},model:{value:t.productParam,callback:function(e){t.productParam=e},expression:"productParam"}}),t._v(" "),i("product-sale-detail",{directives:[{name:"show",rawName:"v-show",value:t.showStatus[1],expression:"showStatus[1]"}],attrs:{"is-edit":t.isEdit},on:{nextStep:t.nextStep,prevStep:t.prevStep},model:{value:t.productParam,callback:function(e){t.productParam=e},expression:"productParam"}}),t._v(" "),i("product-attr-detail",{directives:[{name:"show",rawName:"v-show",value:t.showStatus[2],expression:"showStatus[2]"}],attrs:{"is-edit":t.isEdit},on:{nextStep:t.nextStep,prevStep:t.prevStep},model:{value:t.productParam,callback:function(e){t.productParam=e},expression:"productParam"}}),t._v(" "),i("product-relation-detail",{directives:[{name:"show",rawName:"v-show",value:t.showStatus[3],expression:"showStatus[3]"}],attrs:{"is-edit":t.isEdit},on:{prevStep:t.prevStep,finishCommit:t.finishCommit},model:{value:t.productParam,callback:function(e){t.productParam=e},expression:"productParam"}})],1)},staticRenderFns:[]};var W={name:"addProduct",components:{ProductDetail:i("VU/8")(J,K,!1,function(t){i("BuTG")},null,null).exports}},Z={render:function(){var t=this.$createElement;return(this._self._c||t)("product-detail",{attrs:{"is-edit":!1}})},staticRenderFns:[]};var G=i("VU/8")(W,Z,!1,function(t){i("QRVx")},null,null);e.default=G.exports},QRVx:function(t,e){},QWke:function(t,e){},THZS:function(t,e){},TZVV:function(t,e,i){"use strict";var a=i("//Fk"),r=i.n(a),l=i("ZW30"),n={name:"singleUpload",props:{value:String},computed:{imageUrl:function(){return this.value},imageName:function(){return null!=this.value&&""!==this.value?this.value.substr(this.value.lastIndexOf("/")+1):null},fileList:function(){return[{name:this.imageName,url:this.imageUrl}]},showFileList:{get:function(){return null!==this.value&&""!==this.value&&void 0!==this.value},set:function(t){}}},data:function(){return{dataObj:{policy:"",signature:"",key:"",ossaccessKeyId:"",dir:"",host:""},dialogVisible:!1,useOss:!1,ossUploadUrl:"http://macro-oss.oss-cn-shenzhen.aliyuncs.com",minioUploadUrl:"http://localhost:8080/minio/upload"}},methods:{emitInput:function(t){this.$emit("input",t)},handleRemove:function(t,e){this.emitInput("")},handlePreview:function(t){this.dialogVisible=!0},beforeUpload:function(t){var e=this;return!this.useOss||new r.a(function(t,i){Object(l.a)().then(function(i){e.dataObj.policy=i.data.policy,e.dataObj.signature=i.data.signature,e.dataObj.ossaccessKeyId=i.data.accessKeyId,e.dataObj.key=i.data.dir+"/${filename}",e.dataObj.dir=i.data.dir,e.dataObj.host=i.data.host,t(!0)}).catch(function(t){console.log(t),i(!1)})})},handleUploadSuccess:function(t,e){this.showFileList=!0,this.fileList.pop();var i=this.dataObj.host+"/"+this.dataObj.dir+"/"+e.name;this.useOss||(i=t.data.url),this.fileList.push({name:e.name,url:i}),this.emitInput(this.fileList[0].url)}}},s={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",[i("el-upload",{attrs:{action:t.useOss?t.ossUploadUrl:t.minioUploadUrl,data:t.useOss?t.dataObj:null,"list-type":"picture",multiple:!1,"show-file-list":t.showFileList,"file-list":t.fileList,"before-upload":t.beforeUpload,"on-remove":t.handleRemove,"on-success":t.handleUploadSuccess,"on-preview":t.handlePreview}},[i("el-button",{attrs:{size:"small",type:"primary"}},[t._v("点击上传")]),t._v(" "),i("div",{staticClass:"el-upload__tip",attrs:{slot:"tip"},slot:"tip"},[t._v("只能上传jpg/png文件，且不超过10MB")])],1),t._v(" "),i("el-dialog",{attrs:{visible:t.dialogVisible},on:{"update:visible":function(e){t.dialogVisible=e}}},[i("img",{attrs:{width:"100%",src:t.fileList[0].url,alt:""}})])],1)},staticRenderFns:[]};var o=i("VU/8")(n,s,!1,function(t){i("0jVI")},null,null);e.a=o.exports},UgCr:function(t,e,i){"use strict";e.b=function(t){return Object(a.a)({url:"/product/list",method:"get",params:t})},e.d=function(t){return Object(a.a)({url:"/product/update/newStatus",method:"post",params:t})},e.g=function(t){return Object(a.a)({url:"/product/update/recommendStatus",method:"post",params:t})},e.f=function(t){return Object(a.a)({url:"/product/update/publishStatus",method:"post",params:t})},e.a=function(t){return Object(a.a)({url:"/product/create",method:"post",data:t})},e.e=function(t,e){return Object(a.a)({url:"/product/update/"+t,method:"post",data:e})},e.c=function(t){return Object(a.a)({url:"/product/updateInfo/"+t,method:"get"})};var a=i("vLgD")},WQDg:function(t,e){tinymce.addI18n("zh_CN",{Cut:"剪切","Heading 5":"标题5","Header 2":"标题2","Your browser doesn't support direct access to the clipboard. Please use the Ctrl+X/C/V keyboard shortcuts instead.":"你的浏览器不支持对剪贴板的访问，请使用Ctrl+X/C/V键进行复制粘贴。","Heading 4":"标题4",Div:"Div区块","Heading 2":"标题2",Paste:"粘贴",Close:"关闭","Font Family":"字体",Pre:"预格式文本","Align right":"右对齐","New document":"新文档",Blockquote:"引用","Numbered list":"编号列表","Heading 1":"标题1",Headings:"标题","Increase indent":"增加缩进",Formats:"格式",Headers:"标题","Select all":"全选","Header 3":"标题3",Blocks:"区块",Undo:"撤消",Strikethrough:"删除线","Bullet list":"项目符号","Header 1":"标题1",Superscript:"上标","Clear formatting":"清除格式","Font Sizes":"字号",Subscript:"下标","Header 6":"标题6",Redo:"重复",Paragraph:"段落",Ok:"确定",Bold:"粗体",Code:"代码",Italic:"斜体","Align center":"居中","Header 5":"标题5","Heading 6":"标题6","Heading 3":"标题3","Decrease indent":"减少缩进","Header 4":"标题4","Paste is now in plain text mode. Contents will now be pasted as plain text until you toggle this option off.":"当前为纯文本粘贴模式，再次点击可以回到普通粘贴模式。",Underline:"下划线",Cancel:"取消",Justify:"两端对齐",Inline:"文本",Copy:"复制","Align left":"左对齐","Visual aids":"网格线","Lower Greek":"小写希腊字母",Square:"方块",Default:"默认","Lower Alpha":"小写英文字母",Circle:"空心圆",Disc:"实心圆","Upper Alpha":"大写英文字母","Upper Roman":"大写罗马字母","Lower Roman":"小写罗马字母","Id should start with a letter, followed only by letters, numbers, dashes, dots, colons or underscores.":"标识符应该以字母开头，后跟字母、数字、破折号、点、冒号或下划线。",Name:"名称",Anchor:"锚点",Id:"标识符","You have unsaved changes are you sure you want to navigate away?":"你还有文档尚未保存，确定要离开？","Restore last draft":"恢复上次的草稿","Special character":"特殊符号","Source code":"源代码",Language:"语言","Insert/Edit code sample":"插入/编辑代码示例",B:"B",R:"R",G:"G",Color:"颜色","Right to left":"从右到左","Left to right":"从左到右",Emoticons:"表情",Robots:"机器人","Document properties":"文档属性",Title:"标题",Keywords:"关键词",Encoding:"编码",Description:"描述",Author:"作者",Fullscreen:"全屏","Horizontal line":"水平分割线","Horizontal space":"水平边距","Insert/edit image":"插入/编辑图片",General:"普通",Advanced:"高级",Source:"地址",Border:"边框","Constrain proportions":"保持纵横比","Vertical space":"垂直边距","Image description":"图片描述",Style:"样式",Dimensions:"大小","Insert image":"插入图片",Image:"图片","Zoom in":"放大",Contrast:"对比度",Back:"后退",Gamma:"伽马值","Flip horizontally":"水平翻转",Resize:"调整大小",Sharpen:"锐化","Zoom out":"缩小","Image options":"图片选项",Apply:"应用",Brightness:"亮度","Rotate clockwise":"顺时针旋转","Rotate counterclockwise":"逆时针旋转","Edit image":"编辑图片","Color levels":"颜色层次",Crop:"裁剪",Orientation:"方向","Flip vertically":"垂直翻转",Invert:"反转","Date/time":"日期/时间","Insert date/time":"插入日期/时间","Remove link":"删除链接",Url:"地址","Text to display":"显示文字",Anchors:"锚点","Insert link":"插入链接",Link:"链接","New window":"在新窗口打开",None:"无","The URL you entered seems to be an external link. Do you want to add the required http:// prefix?":"你所填写的URL地址属于外部链接，需要加上http://:前缀吗？","Paste or type a link":"粘贴或输入链接",Target:"打开方式","The URL you entered seems to be an email address. Do you want to add the required mailto: prefix?":"你所填写的URL地址为邮件地址，需要加上mailto:前缀吗？","Insert/edit link":"插入/编辑链接","Insert/edit video":"插入/编辑视频",Media:"媒体","Alternative source":"镜像","Paste your embed code below:":"将内嵌代码粘贴在下面:","Insert video":"插入视频",Poster:"封面","Insert/edit media":"插入/编辑媒体",Embed:"内嵌","Nonbreaking space":"不间断空格","Page break":"分页符","Paste as text":"粘贴为文本",Preview:"预览",Print:"打印",Save:"保存","Could not find the specified string.":"未找到搜索内容.",Replace:"替换",Next:"下一个","Whole words":"全字匹配","Find and replace":"查找和替换","Replace with":"替换为",Find:"查找","Replace all":"全部替换","Match case":"区分大小写",Prev:"上一个",Spellcheck:"拼写检查",Finish:"完成","Ignore all":"全部忽略",Ignore:"忽略","Add to Dictionary":"添加到字典","Insert row before":"在上方插入",Rows:"行",Height:"高","Paste row after":"粘贴到下方",Alignment:"对齐方式","Border color":"边框颜色","Column group":"列组",Row:"行","Insert column before":"在左侧插入","Split cell":"拆分单元格","Cell padding":"单元格内边距","Cell spacing":"单元格外间距","Row type":"行类型","Insert table":"插入表格",Body:"表体",Caption:"标题",Footer:"表尾","Delete row":"删除行","Paste row before":"粘贴到上方",Scope:"范围","Delete table":"删除表格","H Align":"水平对齐",Top:"顶部对齐","Header cell":"表头单元格",Column:"列","Row group":"行组",Cell:"单元格",Middle:"垂直居中","Cell type":"单元格类型","Copy row":"复制行","Row properties":"行属性","Table properties":"表格属性",Bottom:"底部对齐","V Align":"垂直对齐",Header:"表头",Right:"右对齐","Insert column after":"在右侧插入",Cols:"列","Insert row after":"在下方插入",Width:"宽","Cell properties":"单元格属性",Left:"左对齐","Cut row":"剪切行","Delete column":"删除列",Center:"居中","Merge cells":"合并单元格","Insert template":"插入模板",Templates:"模板","Background color":"背景色","Custom...":"自定义...","Custom color":"自定义颜色","No color":"无","Text color":"文字颜色","Table of Contents":"内容列表","Show blocks":"显示区块边框","Show invisible characters":"显示不可见字符","Words: {0}":"字数：{0}",Insert:"插入",File:"文件",Edit:"编辑","Rich Text Area. Press ALT-F9 for menu. Press ALT-F10 for toolbar. Press ALT-0 for help":"在编辑区按ALT-F9打开菜单，按ALT-F10打开工具栏，按ALT-0查看帮助",Tools:"工具",View:"视图",Table:"表格",Format:"格式"})},ZW30:function(t,e,i){"use strict";e.a=function(){return Object(a.a)({url:"/aliyun/oss/policy",method:"get"})};var a=i("vLgD")},fZjL:function(t,e,i){t.exports={default:i("jFbC"),__esModule:!0}},ioQ5:function(t,e,i){i("HpRW")("Set")},j3sQ:function(t,e){},jFbC:function(t,e,i){i("Cdx3"),t.exports=i("FeBl").Object.keys},jJx3:function(t,e){},lHA8:function(t,e,i){t.exports={default:i("pPW7"),__esModule:!0}},m9gC:function(t,e,i){var a=i("RY/4"),r=i("4WTo");t.exports=function(t){return function(){if(a(this)!=t)throw TypeError(t+"#toJSON isn't generic");return r(this)}}},mvHQ:function(t,e,i){t.exports={default:i("qkKv"),__esModule:!0}},oNmr:function(t,e,i){i("9Bbf")("Set")},oeOm:function(t,e,i){var a=i("7Doy");t.exports=function(t,e){return new(a(t))(e)}},pJas:function(t,e){},pPW7:function(t,e,i){i("M6a0"),i("zQR9"),i("+tPU"),i("ttyz"),i("BDhv"),i("oNmr"),i("ioQ5"),t.exports=i("FeBl").Set},qkKv:function(t,e,i){var a=i("FeBl"),r=a.JSON||(a.JSON={stringify:JSON.stringify});t.exports=function(t){return r.stringify.apply(r,arguments)}},qo66:function(t,e,i){"use strict";var a=i("7KvD"),r=i("kM2E"),l=i("06OY"),n=i("S82l"),s=i("hJx8"),o=i("xH/j"),u=i("NWt+"),c=i("2KxR"),d=i("EqjI"),p=i("e6n0"),v=i("evD5").f,h=i("ALrJ")(0),m=i("+E39");t.exports=function(t,e,i,f,b,g){var k=a[t],y=k,P=b?"set":"add",S=y&&y.prototype,_={};return m&&"function"==typeof y&&(g||S.forEach&&!n(function(){(new y).entries().next()}))?(y=e(function(e,i){c(e,y,t,"_c"),e._c=new k,void 0!=i&&u(i,b,e[P],e)}),h("add,clear,delete,forEach,get,has,set,keys,values,entries,toJSON".split(","),function(t){var e="add"==t||"set"==t;t in S&&(!g||"clear"!=t)&&s(y.prototype,t,function(i,a){if(c(this,y,t),!e&&g&&!d(i))return"get"==t&&void 0;var r=this._c[t](0===i?0:i,a);return e?this:r})}),g||v(y.prototype,"size",{get:function(){return this._c.size}})):(y=f.getConstructor(e,t,b,P),o(y.prototype,i),l.NEED=!0),p(y,t),_[t]=y,r(r.G+r.W+r.F,_),g||f.setStrong(y,t,b),y}},ttyz:function(t,e,i){"use strict";var a=i("9C8M"),r=i("LIJb");t.exports=i("qo66")("Set",function(t){return function(){return t(this,arguments.length>0?arguments[0]:void 0)}},{add:function(t){return a.def(r(this,"Set"),t=0===t?0:t,t)}},a)},uqUo:function(t,e,i){var a=i("kM2E"),r=i("FeBl"),l=i("S82l");t.exports=function(t,e){var i=(r.Object||{})[t]||Object[t],n={};n[t]=e(i),a(a.S+a.F*l(function(){i(1)}),"Object",n)}},wsSU:function(t,e){}});
//# sourceMappingURL=1.582fc091707f14948202.js.map